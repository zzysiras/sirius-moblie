<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" type="text/css" media="screen" href="../../layui/css/layui.css">
    <link rel="stylesheet" type="text/css" media="screen" href="../../css/bootstrap.min.css">
</head>
<body>
<button type="button" class="layui-btn" id="banner" >
    <i class="layui-icon">&#xe67c;</i>首页banner图
</button>
<div id="bannerImg">
</div>

<button type="button" class="layui-btn" id="test1">
    <i class="layui-icon">&#xe67c;</i>demo1
</button>
<div id="demo1Img">
</div>

<button type="button" class="layui-btn" id="test2">
    <i class="layui-icon">&#xe67c;</i>demo2
</button>
<div id="demo2Img">
</div>

<button type="button" class="layui-btn" id="test3">
    <i class="layui-icon">&#xe67c;</i>demo3
</button>
<div id="demo3Img">
</div>

<button type="button" class="layui-btn" id="test4">
    <i class="layui-icon">&#xe67c;</i>demo4
</button>
<div id="demo4Img">
</div>


<script type="text/javascript" src="../../js/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="../../js/labjs.js"></script>
<script type="text/javascript" src="../../layui/layui.js"></script>
<script type="text/javascript">
    var pro = window.location.protocol;
    var host = window.location.host;
    var domain = pro + "//" + host;

    initData();

    function initData(){
        $.ajax({
            type : 'get',
            url : '/demo/',
            async : false,
            success : function(data) {
                console.log(data);
                var url = '';
                var url1 = '';
                var url2 = '';
                var url3 = '';
                var url4 = '';
                for(i=0;i<data.length;i++){
                    if(data[i].name == "banner"){
                        url = data[i].imgUrl;
                    }
                    if(data[i].name == "demo1"){
                        url1 = data[i].imgUrl;
                    }
                    if(data[i].name == "demo2"){
                        url2 = data[i].imgUrl;
                    }
                    if(data[i].name == "demo3"){
                        url3 = data[i].imgUrl;
                    }
                    if(data[i].name == "demo4"){
                        url4 = data[i].imgUrl;
                    }

                }
                console.log(url);
                console.log(url3);
                //var url = data[0].imgUrl;
                if(url!=null && url!=""){
                    function addHtml(url) {
                        var src = domain + "/statics" + url;
                        var a = "<a target='_blank' href='" + src +"'><img style='width: 800px;height: 640px' src='" + src + "'></img></a>";
                        return a;
                    }
                    var banner = addHtml(url);
                    var demo1 = addHtml(url1);
                    var demo2 = addHtml(url2);
                    var demo3 = addHtml(url3);
                    var demo4 = addHtml(url4);
                    $("#bannerImg").html(banner);
                    $("#demo1Img").html(demo1);
                    $("#demo2Img").html(demo2);
                    $("#demo3Img").html(demo3);
                    $("#demo4Img").html(demo4);
                }
            }
        });
    }

    layui.use(['upload','layer'], function(){
        var layer = layui.layer;
        var upload = layui.upload;
        upload.render({
            elem: '#banner' //绑定元素
            ,accept: 'file' //允许上传的文件类型
            ,url: '/demo/banner' //上传接口
            ,done: function(res, index, upload){
                var url = res.url;
                $.ajax({
                    type : 'get',
                    url : '/demo/banner',
                    async : false,
                    success : function(data) {
                        console.log(data);
                        layer.msg("上传成功");
                        var src = data;
                        var a = "<a target='_blank' href='" + src +"'><img src='" + src + "'></img></a>";
                        $("#bannerImg").html(a);
                    }
                });
            }
        });
        upload.render({
            elem: '#test1' //绑定元素
            ,accept: 'file' //允许上传的文件类型
            ,url: '/demo/demo1' //上传接口
            ,done: function(res, index, upload){
                $.ajax({
                    type : 'get',
                    url : '/demo/demo1',
                    async : false,
                    success : function(data) {
                        layer.msg("上传成功");
                        var src = data;
                        var a = "<a target='_blank' href='" + src +"'><img src='" + src + "'></img></a>";
                        $("#demo1Img").html(a);
                    }
                });
            }
        });
        upload.render({
            elem: '#test2' //绑定元素
            ,accept: 'file' //允许上传的文件类型
            ,url: '/demo/demo2' //上传接口
            ,done: function(res, index, upload){
                var url = res.url;
                $.ajax({
                    type : 'get',
                    url : '/demo/demo2',
                    async : false,
                    success : function(data) {
                        layer.msg("上传成功");
                        var src = data;
                        var a = "<a target='_blank' href='" + src +"'><img src='" + src + "'></img></a>";
                        $("#demo2Img").html(a);
                    }
                });
            }
        });
        upload.render({
            elem: '#test3' //绑定元素
            ,accept: 'file' //允许上传的文件类型
            ,url: '/demo/demo3' //上传接口
            ,done: function(res, index, upload){
                var url = res.url;
                $.ajax({
                    type : 'get',
                    url : '/demo/demo3',
                    async : false,
                    success : function(data) {
                        layer.msg("上传成功");
                        var src = data;
                        var a = "<a target='_blank' href='" + src +"'><img src='" + src + "'></img></a>";
                        $("#demo3Img").html(a);
                    }
                });
            }
        });
        upload.render({
            elem: '#test4' //绑定元素
            ,accept: 'file' //允许上传的文件类型
            ,url: '/demo/demo4' //上传接口
            ,done: function(res, index, upload){
                var url = res.url;
                $.ajax({
                    type : 'get',
                    url : '/demo/demo4',
                    async : false,
                    success : function(data) {
                        layer.msg("上传成功");
                        var src = data;
                        var a = "<a target='_blank' href='" + src +"'><img src='" + src + "'></img></a>";
                        $("#demo4Img").html(a);
                    }
                });
            }
        });
    });

</script>
</body>
</html>
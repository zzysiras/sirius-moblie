/*! =========================================================
 * bootstrap-slider.js
 *
 * Maintainers:
 *		Kyle Kemp
 *			- Twitter: @seiyria
 *			- Github:  seiyria
 *		Rohit Kalkur
 *			- Twitter: @Rovolutionary
 *			- Github:  rovolution
 *
 * =========================================================
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================= */
(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],b)}else{if(typeof module==="object"&&module.exports){var d;try{d=require("jquery")}catch(c){d=null}module.exports=b(d)}else{a.Slider=b(a.jQuery)}}}(this,function(b){var a;(function(e){var f=Array.prototype.slice;function d(){}function c(h){if(!h){return}function j(k){if(k.prototype.option){return}k.prototype.option=function(l){if(!h.isPlainObject(l)){return}this.options=h.extend(true,this.options,l)}}var g=typeof console==="undefined"?d:function(k){console.error(k)};function i(k,l){h.fn[k]=function(p){if(typeof p==="string"){var o=f.call(arguments,1);for(var q=0,n=this.length;q<n;q++){var s=this[q];var m=h.data(s,k);if(!m){g("cannot call methods on "+k+" prior to initialization; attempted to call '"+p+"'");continue}if(!h.isFunction(m[p])||p.charAt(0)==="_"){g("no such method '"+p+"' for "+k+" instance");continue}var r=m[p].apply(m,o);if(r!==undefined&&r!==m){return r}}return this}else{var t=this.map(function(){var u=h.data(this,k);if(u){u.option(p);u._init()}else{u=new l(this,p);h.data(this,k,u)}return h(this)});if(!t||t.length>1){return t}else{return t[0]}}}}h.bridget=function(k,l){j(l);i(k,l)};return h.bridget}c(e)})(b);(function(e){var f={formatInvalidInputErrorMsg:function(g){return"Invalid input value '"+g+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"};a=function(h,g){c.call(this,h,g);return this};function c(k,m){if(typeof k==="string"){this.element=document.querySelector(k)}else{if(k instanceof HTMLElement){this.element=k}}var v=this.element.style.width;var j=false;var s=this.element.parentNode;var n;var h;var u;if(this.sliderElem){j=true}else{this.sliderElem=document.createElement("div");this.sliderElem.className="slider";var g=document.createElement("div");g.className="slider-track";n=document.createElement("div");n.className="slider-selection";h=document.createElement("div");h.className="slider-handle min-slider-handle";u=document.createElement("div");u.className="slider-handle max-slider-handle";g.appendChild(n);g.appendChild(h);g.appendChild(u);var p=function(B){var C=document.createElement("div");C.className="tooltip-arrow";var i=document.createElement("div");i.className="tooltip-inner";B.appendChild(C);B.appendChild(i)};var q=document.createElement("div");q.className="tooltip tooltip-main";p(q);var l=document.createElement("div");l.className="tooltip tooltip-min";p(l);var o=document.createElement("div");o.className="tooltip tooltip-max";p(o);this.sliderElem.appendChild(g);this.sliderElem.appendChild(q);this.sliderElem.appendChild(l);this.sliderElem.appendChild(o);s.insertBefore(this.sliderElem,this.element);this.element.style.display="none"}if(e){this.$element=e(this.element);this.$sliderElem=e(this.sliderElem)}m=m?m:{};var t=Object.keys(this.defaultOptions);for(var x=0;x<t.length;x++){var r=t[x];var A=m[r];A=(typeof A!=="undefined")?A:z(this.element,r);A=(A!==null)?A:this.defaultOptions[r];if(!this.options){this.options={}}this.options[r]=A}function z(C,E){var B="data-slider-"+E;var i=C.getAttribute(B);try{return JSON.parse(i)}catch(D){return i}}this.eventToCallbackMap={};this.sliderElem.id=this.options.id;this.touchCapable="ontouchstart" in window||(window.DocumentTouch&&document instanceof window.DocumentTouch);this.tooltip=this.sliderElem.querySelector(".tooltip-main");this.tooltipInner=this.tooltip.querySelector(".tooltip-inner");this.tooltip_min=this.sliderElem.querySelector(".tooltip-min");this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner");this.tooltip_max=this.sliderElem.querySelector(".tooltip-max");this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner");if(j===true){this._removeClass(this.sliderElem,"slider-horizontal");this._removeClass(this.sliderElem,"slider-vertical");this._removeClass(this.tooltip,"hide");this._removeClass(this.tooltip_min,"hide");this._removeClass(this.tooltip_max,"hide");["left","top","width","height"].forEach(function(i){this._removeProperty(this.trackSelection,i)},this);[this.handle1,this.handle2].forEach(function(i){this._removeProperty(i,"left");this._removeProperty(i,"top")},this);[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(i){this._removeProperty(i,"left");this._removeProperty(i,"top");this._removeProperty(i,"margin-left");this._removeProperty(i,"margin-top");this._removeClass(i,"right");this._removeClass(i,"top")},this)}if(this.options.orientation==="vertical"){this._addClass(this.sliderElem,"slider-vertical");this.stylePos="top";this.mousePos="pageY";this.sizePos="offsetHeight";this._addClass(this.tooltip,"right");this.tooltip.style.left="100%";this._addClass(this.tooltip_min,"right");this.tooltip_min.style.left="100%";this._addClass(this.tooltip_max,"right");this.tooltip_max.style.left="100%"}else{this._addClass(this.sliderElem,"slider-horizontal");this.sliderElem.style.width=v;this.options.orientation="horizontal";this.stylePos="left";this.mousePos="pageX";this.sizePos="offsetWidth";this._addClass(this.tooltip,"top");this.tooltip.style.top=-this.tooltip.outerHeight-14+"px";this._addClass(this.tooltip_min,"top");this.tooltip_min.style.top=-this.tooltip_min.outerHeight-14+"px";this._addClass(this.tooltip_max,"top");this.tooltip_max.style.top=-this.tooltip_max.outerHeight-14+"px"}if(this.options.value instanceof Array){this.options.range=true}else{if(this.options.range){this.options.value=[this.options.value,this.options.max]}}this.trackSelection=n||this.trackSelection;if(this.options.selection==="none"){this._addClass(this.trackSelection,"hide")}this.handle1=h||this.handle1;this.handle2=u||this.handle2;if(j===true){this._removeClass(this.handle1,"round triangle");this._removeClass(this.handle2,"round triangle hide")}var y=["round","triangle","custom"];var w=y.indexOf(this.options.handle)!==-1;if(w){this._addClass(this.handle1,this.options.handle);this._addClass(this.handle2,this.options.handle)}this.offset=this._offset(this.sliderElem);this.size=this.sliderElem[this.sizePos];this.setValue(this.options.value);this.handle1Keydown=this._keydown.bind(this,0);this.handle1.addEventListener("keydown",this.handle1Keydown,false);this.handle2Keydown=this._keydown.bind(this,1);this.handle2.addEventListener("keydown",this.handle2Keydown,false);if(this.touchCapable){this.mousedown=this._mousedown.bind(this);this.sliderElem.addEventListener("touchstart",this.mousedown,false)}else{this.mousedown=this._mousedown.bind(this);this.sliderElem.addEventListener("mousedown",this.mousedown,false)}if(this.options.tooltip==="hide"){this._addClass(this.tooltip,"hide");this._addClass(this.tooltip_min,"hide");this._addClass(this.tooltip_max,"hide")}else{if(this.options.tooltip==="always"){this._showTooltip();this._alwaysShowTooltip=true}else{this.showTooltip=this._showTooltip.bind(this);this.hideTooltip=this._hideTooltip.bind(this);this.sliderElem.addEventListener("mouseenter",this.showTooltip,false);this.sliderElem.addEventListener("mouseleave",this.hideTooltip,false);this.handle1.addEventListener("focus",this.showTooltip,false);this.handle1.addEventListener("blur",this.hideTooltip,false);this.handle2.addEventListener("focus",this.showTooltip,false);this.handle2.addEventListener("blur",this.hideTooltip,false)}}if(this.options.enabled){this.enable()}else{this.disable()}}a.prototype={_init:function(){},constructor:a,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:false,selection:"before",tooltip:"show",tooltip_split:false,handle:"round",reversed:false,enabled:true,formatter:function(g){if(g instanceof Array){return g[0]+" : "+g[1]}else{return g}},natural_arrow_keys:false},over:false,inDrag:false,getValue:function(){if(this.options.range){return this.options.value}return this.options.value[0]},setValue:function(k,i){if(!k){k=0}var h=this.getValue();this.options.value=this._validateInputValue(k);var g=this._applyPrecision.bind(this);if(this.options.range){this.options.value[0]=g(this.options.value[0]);this.options.value[1]=g(this.options.value[1]);this.options.value[0]=Math.max(this.options.min,Math.min(this.options.max,this.options.value[0]));this.options.value[1]=Math.max(this.options.min,Math.min(this.options.max,this.options.value[1]))}else{this.options.value=g(this.options.value);this.options.value=[Math.max(this.options.min,Math.min(this.options.max,this.options.value))];this._addClass(this.handle2,"hide");if(this.options.selection==="after"){this.options.value[1]=this.options.max}else{this.options.value[1]=this.options.min}}this.diff=this.options.max-this.options.min;if(this.diff>0){this.percentage=[(this.options.value[0]-this.options.min)*100/this.diff,(this.options.value[1]-this.options.min)*100/this.diff,this.options.step*100/this.diff]}else{this.percentage=[0,0,100]}this._layout();var j=this.options.range?this.options.value:this.options.value[0];if(i===true){this._trigger("slide",j)}if(h!==j){this._trigger("change",{oldValue:h,newValue:j})}this._setDataVal(j);return this},destroy:function(){this._removeSliderEventHandlers();this.sliderElem.parentNode.removeChild(this.sliderElem);this.element.style.display="";this._cleanUpEventCallbacksMap();this.element.removeAttribute("data");if(e){this._unbindJQueryEventHandlers();this.$element.removeData("slider")}},disable:function(){this.options.enabled=false;this.handle1.removeAttribute("tabindex");this.handle2.removeAttribute("tabindex");this._addClass(this.sliderElem,"slider-disabled");this._trigger("slideDisabled");return this},enable:function(){this.options.enabled=true;this.handle1.setAttribute("tabindex",0);this.handle2.setAttribute("tabindex",0);this._removeClass(this.sliderElem,"slider-disabled");this._trigger("slideEnabled");return this},toggle:function(){if(this.options.enabled){this.disable()}else{this.enable()}return this},isEnabled:function(){return this.options.enabled},on:function(g,h){if(e){this.$element.on(g,h);this.$sliderElem.on(g,h)}else{this._bindNonQueryEventHandler(g,h)}return this},getAttribute:function(g){if(g){return this.options[g]}else{return this.options}},setAttribute:function(g,h){this.options[g]=h;return this},refresh:function(){this._removeSliderEventHandlers();c.call(this,this.element,this.options);if(e){e.data(this.element,"slider",this)}return this},relayout:function(){this._layout();return this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,false);this.handle1.removeEventListener("focus",this.showTooltip,false);this.handle1.removeEventListener("blur",this.hideTooltip,false);this.handle2.removeEventListener("keydown",this.handle2Keydown,false);this.handle2.removeEventListener("focus",this.handle2Keydown,false);this.handle2.removeEventListener("blur",this.handle2Keydown,false);this.sliderElem.removeEventListener("mouseenter",this.showTooltip,false);this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,false);this.sliderElem.removeEventListener("touchstart",this.mousedown,false);this.sliderElem.removeEventListener("mousedown",this.mousedown,false)},_bindNonQueryEventHandler:function(g,h){if(this.eventToCallbackMap[g]===undefined){this.eventToCallbackMap[g]=[]}this.eventToCallbackMap[g].push(h)},_cleanUpEventCallbacksMap:function(){var j=Object.keys(this.eventToCallbackMap);for(var h=0;h<j.length;h++){var g=j[h];this.eventToCallbackMap[g]=null}},_showTooltip:function(){if(this.options.tooltip_split===false){this._addClass(this.tooltip,"in")}else{this._addClass(this.tooltip_min,"in");this._addClass(this.tooltip_max,"in")}this.over=true},_hideTooltip:function(){if(this.inDrag===false&&this.alwaysShowTooltip!==true){this._removeClass(this.tooltip,"in");this._removeClass(this.tooltip_min,"in");this._removeClass(this.tooltip_max,"in")}this.over=false},_layout:function(){var l;if(this.options.reversed){l=[100-this.percentage[0],this.percentage[1]]}else{l=[this.percentage[0],this.percentage[1]]}this.handle1.style[this.stylePos]=l[0]+"%";this.handle2.style[this.stylePos]=l[1]+"%";if(this.options.orientation==="vertical"){this.trackSelection.style.top=Math.min(l[0],l[1])+"%";this.trackSelection.style.height=Math.abs(l[0]-l[1])+"%"}else{this.trackSelection.style.left=Math.min(l[0],l[1])+"%";this.trackSelection.style.width=Math.abs(l[0]-l[1])+"%";var k=this.tooltip_min.getBoundingClientRect();var h=this.tooltip_max.getBoundingClientRect();if(k.right>h.left){this._removeClass(this.tooltip_max,"top");this._addClass(this.tooltip_max,"bottom");this.tooltip_max.style.top=18+"px"}else{this._removeClass(this.tooltip_max,"bottom");this._addClass(this.tooltip_max,"top");this.tooltip_max.style.top=this.tooltip_min.style.top}}var j;if(this.options.range){j=this.options.formatter(this.options.value);this._setText(this.tooltipInner,j);this.tooltip.style[this.stylePos]=(l[1]+l[0])/2+"%";if(this.options.orientation==="vertical"){this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px")}else{this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")}if(this.options.orientation==="vertical"){this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px")}else{this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")}var g=this.options.formatter(this.options.value[0]);this._setText(this.tooltipInner_min,g);var i=this.options.formatter(this.options.value[1]);this._setText(this.tooltipInner_max,i);this.tooltip_min.style[this.stylePos]=l[0]+"%";if(this.options.orientation==="vertical"){this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px")}else{this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px")}this.tooltip_max.style[this.stylePos]=l[1]+"%";if(this.options.orientation==="vertical"){this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px")}else{this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}}else{j=this.options.formatter(this.options.value[0]);this._setText(this.tooltipInner,j);this.tooltip.style[this.stylePos]=l[0]+"%";if(this.options.orientation==="vertical"){this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px")}else{this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px")}}},_removeProperty:function(g,h){if(g.style.removeProperty){g.style.removeProperty(h)}else{g.style.removeAttribute(h)}},_mousedown:function(h){if(!this.options.enabled){return false}this._triggerFocusOnHandle();this.offset=this._offset(this.sliderElem);this.size=this.sliderElem[this.sizePos];var g=this._getPercentage(h);if(this.options.range){var k=Math.abs(this.percentage[0]-g);var j=Math.abs(this.percentage[1]-g);this.dragged=(k<j)?0:1}else{this.dragged=0}this.percentage[this.dragged]=this.options.reversed?100-g:g;this._layout();if(this.touchCapable){document.removeEventListener("touchmove",this.mousemove,false);document.removeEventListener("touchend",this.mouseup,false)}if(this.mousemove){document.removeEventListener("mousemove",this.mousemove,false)}if(this.mouseup){document.removeEventListener("mouseup",this.mouseup,false)}this.mousemove=this._mousemove.bind(this);this.mouseup=this._mouseup.bind(this);if(this.touchCapable){document.addEventListener("touchmove",this.mousemove,false);document.addEventListener("touchend",this.mouseup,false)}document.addEventListener("mousemove",this.mousemove,false);document.addEventListener("mouseup",this.mouseup,false);this.inDrag=true;var i=this._calculateValue();this._trigger("slideStart",i);this._setDataVal(i);this.setValue(i);this._pauseEvent(h);return true},_triggerFocusOnHandle:function(g){if(g===0){this.handle1.focus()}if(g===1){this.handle2.focus()}},_keydown:function(l,k){if(!this.options.enabled){return false}var j;switch(k.keyCode){case 37:case 40:j=-1;break;case 39:case 38:j=1;break}if(!j){return}if(this.options.natural_arrow_keys){var g=(this.options.orientation==="vertical"&&!this.options.reversed);var i=(this.options.orientation==="horizontal"&&this.options.reversed);if(g||i){j=j*-1}}var n=j*this.percentage[2];var h=this.percentage[l]+n;if(h>100){h=100}else{if(h<0){h=0}}this.dragged=l;this._adjustPercentageForRangeSliders(h);this.percentage[this.dragged]=h;this._layout();var m=this._calculateValue();this._trigger("slideStart",m);this._setDataVal(m);this.setValue(m,true);this._trigger("slideStop",m);this._setDataVal(m);this._pauseEvent(k);return false},_pauseEvent:function(g){if(g.stopPropagation){g.stopPropagation()}if(g.preventDefault){g.preventDefault()}g.cancelBubble=true;g.returnValue=false},_mousemove:function(h){if(!this.options.enabled){return false}var g=this._getPercentage(h);this._adjustPercentageForRangeSliders(g);this.percentage[this.dragged]=this.options.reversed?100-g:g;this._layout();var i=this._calculateValue();this.setValue(i,true);return false},_adjustPercentageForRangeSliders:function(g){if(this.options.range){if(this.dragged===0&&this.percentage[1]<g){this.percentage[0]=this.percentage[1];this.dragged=1}else{if(this.dragged===1&&this.percentage[0]>g){this.percentage[1]=this.percentage[0];this.dragged=0}}}},_mouseup:function(){if(!this.options.enabled){return false}if(this.touchCapable){document.removeEventListener("touchmove",this.mousemove,false);document.removeEventListener("touchend",this.mouseup,false)}document.removeEventListener("mousemove",this.mousemove,false);document.removeEventListener("mouseup",this.mouseup,false);this.inDrag=false;if(this.over===false){this._hideTooltip()}var g=this._calculateValue();this._layout();this._trigger("slideStop",g);this._setDataVal(g);return false},_calculateValue:function(){var g;if(this.options.range){g=[this.options.min,this.options.max];if(this.percentage[0]!==0){g[0]=(Math.max(this.options.min,this.options.min+Math.round((this.diff*this.percentage[0]/100)/this.options.step)*this.options.step));g[0]=this._applyPrecision(g[0])}if(this.percentage[1]!==100){g[1]=(Math.min(this.options.max,this.options.min+Math.round((this.diff*this.percentage[1]/100)/this.options.step)*this.options.step));g[1]=this._applyPrecision(g[1])}}else{g=(this.options.min+Math.round((this.diff*this.percentage[0]/100)/this.options.step)*this.options.step);if(g<this.options.min){g=this.options.min}else{if(g>this.options.max){g=this.options.max}}g=parseFloat(g);g=this._applyPrecision(g)}return g},_applyPrecision:function(h){var g=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(h,g)},_getNumDigitsAfterDecimalPlace:function(h){var g=(""+h).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!g){return 0}return Math.max(0,(g[1]?g[1].length:0)-(g[2]?+g[2]:0))},_applyToFixedAndParseFloat:function(h,g){var i=h.toFixed(g);return parseFloat(i)},_getPercentage:function(h){if(this.touchCapable&&(h.type==="touchstart"||h.type==="touchmove")){h=h.touches[0]}var g=(h[this.mousePos]-this.offset[this.stylePos])*100/this.size;g=Math.round(g/this.percentage[2])*this.percentage[2];return Math.max(0,Math.min(100,g))},_validateInputValue:function(g){if(typeof g==="number"){return g}else{if(g instanceof Array){this._validateArray(g);return g}else{throw new Error(f.formatInvalidInputErrorMsg(g))}}},_validateArray:function(j){for(var h=0;h<j.length;h++){var g=j[h];if(typeof g!=="number"){throw new Error(f.formatInvalidInputErrorMsg(g))}}},_setDataVal:function(h){var g="value: '"+h+"'";this.element.setAttribute("data",g);this.element.setAttribute("value",h)},_trigger:function(g,l){l=(l||l===0)?l:undefined;var k=this.eventToCallbackMap[g];if(k&&k.length){for(var j=0;j<k.length;j++){var h=k[j];h(l)}}if(e){this._triggerJQueryEvent(g,l)}},_triggerJQueryEvent:function(g,i){var h={type:g,value:i};this.$element.trigger(h);this.$sliderElem.trigger(h)},_unbindJQueryEventHandlers:function(){this.$element.off();this.$sliderElem.off()},_setText:function(g,h){if(typeof g.innerText!=="undefined"){g.innerText=h}else{if(typeof g.textContent!=="undefined"){g.textContent=h}}},_removeClass:function(j,l){var h=l.split(" ");var n=j.className;for(var g=0;g<h.length;g++){var m=h[g];var k=new RegExp("(?:\\s|^)"+m+"(?:\\s|$)");n=n.replace(k," ")}j.className=n.trim()},_addClass:function(j,l){var h=l.split(" ");var o=j.className;for(var g=0;g<h.length;g++){var n=h[g];var k=new RegExp("(?:\\s|^)"+n+"(?:\\s|$)");var m=k.test(o);if(!m){o+=" "+n}}j.className=o.trim()},_offset:function(i){var g=0;var h=0;if(i.offsetParent){do{g+=i.offsetLeft;h+=i.offsetTop}while(i=i.offsetParent)}return{left:g,top:h}},_css:function(j,g,i){if(e){e.style(j,g,i)}else{var h=g.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(k,l){return l.toUpperCase()});j.style[h]=i}}};if(e){var d=e.fn.slider?"bootstrapSlider":"slider";e.bridget(d,a)}})(b);return a}));